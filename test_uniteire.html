<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tests Unitaires - le système de gestion RH</title>
</head>
<body>
  <h1>Résultats des Tests Unitaires :</h1>
  <pre id="test-results"></pre>

  <input type="text" id="ajout-nom" placeholder="Nom">
  <input type="text" id="ajout-poste" placeholder="Poste">
  <button onclick="ajouterEmployeManuel()">Ajouter</button>

  <ul id="liste-employes" style="display:none;"></ul>

  <script src="app.js"></script>

  <script>
    // Fonction d'assertion simple
    function assertEquals(actual, expected, testName) {
      const results = document.getElementById('test-results');
      if (JSON.stringify(actual) === JSON.stringify(expected)) {
        results.textContent += `✔️ ${testName} : Réussi\n`;
      } else {
        results.textContent += `❌ ${testName} : Échoué\n   Attendu : ${JSON.stringify(expected)}\n   Obtenu : ${JSON.stringify(actual)}\n`;
      }
    }

    // Simulation des employés
    const employes = [
      { id: 1, nom: "Dupont", poste: "Développeur" },
      { id: 2, nom: "Durand", poste: "Designer" }
    ];

    // Fonction pour afficher les employés
    function afficherEmployes() {
      const listeDiv = document.getElementById('liste-employes');
      listeDiv.innerHTML = '';
      employes.forEach(emp => {
        const empDiv = document.createElement('li');
        empDiv.textContent = `${emp.id} - ${emp.nom} - ${emp.poste}`;
        listeDiv.appendChild(empDiv);
      });
      listeDiv.style.display = 'block';
    }

    // Ajouter un employé
    function ajouterEmploye(id, nom, poste) {
      employes.push({ id, nom, poste });
    }

    // Fonction pour ajouter un employé via l'interface
    function ajouterEmployeManuel() {
      const nom = document.getElementById('ajout-nom').value;
      const poste = document.getElementById('ajout-poste').value;
      const id = employes.length > 0 ? employes[employes.length - 1].id + 1 : 1;
      if (nom && poste) {
        ajouterEmploye(id, nom, poste);
        afficherEmployes();
      }
    }

    // Test unitaire pour ajouter un employé
    function testAjouterEmploye() {
      ajouterEmploye(4, 'Lili', 'Développeur');
      const lastEmploye = employes[employes.length - 1];
      assertEquals(lastEmploye, { id: 4, nom: 'Lili', poste: 'Développeur' }, 'Vérifier l\'ajout d\'un employé');
    }

    // Test unitaire pour vérifier l'affichage dans l'interface
    function testAjouterEmployeManuel() {
      // Simuler l'ajout via l'interface
      document.getElementById('ajout-nom').value = 'Lili';
      document.getElementById('ajout-poste').value = 'Développeur';
      ajouterEmployeManuel();

      // Vérifier que l'employé a été ajouté dans la liste HTML
      const employesList = document.getElementById('liste-employes');
      const lastItem = employesList.lastElementChild;
      assertEquals(lastItem.textContent, '4 - Lili - Développeur', 'Vérifier l\'affichage de l\'employé ajouté');
    }

    // Exécution des tests
    function runTests() {
      testAjouterEmploye();
      testAjouterEmployeManuel();
    }

    // Exécuter les tests à l'ouverture
    runTests();
  </script>
</body>
</html>
